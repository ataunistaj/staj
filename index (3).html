<!DOCTYPE html>
<html lang="tr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staj Rehberi - Atatürk Üniversitesi</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class', 
            theme: {
                extend: {
                    colors: {
                        slate: { 850: '#151f32' } // Custom dark background
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'slide-up': 'slideUp 0.5s ease-out forwards'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

    <style>
        /* Clean Scrollbars */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>

<body class="bg-slate-50 dark:bg-slate-950 font-sans text-gray-900 dark:text-gray-100 selection:bg-sky-200 dark:selection:bg-sky-900 min-h-screen transition-colors duration-300">

  <div id="landing-page" class="min-h-screen flex flex-col items-center justify-center p-4 relative z-50 bg-slate-50 dark:bg-slate-950 transition-colors duration-300">

    <a href="https://chatgpt.com/g/g-684140347a488191bae47913dc16815a-staj-basvuru-asistani-bst" target="_blank" class="absolute top-6 left-6 hidden md:flex items-center gap-4 bg-white dark:bg-slate-800 p-3 rounded-2xl shadow-2xl border-2 border-sky-100 dark:border-slate-700 hover:border-sky-500 dark:hover:border-sky-400 hover:scale-105 transition-all cursor-pointer z-50 group">
        
        <div class="relative">
            <img src="qr.jpg" 
                 alt="Scan for AI" 
                 class="w-20 h-20 rounded-lg group-hover:opacity-90 transition-opacity"
            >
            <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                <i data-lucide="scan-line" class="w-8 h-8 text-sky-600 bg-white/90 rounded p-1"></i>
            </div>
        </div>

        <div class="flex flex-col pr-2">
            <span class="text-xs font-extrabold text-sky-700 dark:text-sky-400 uppercase tracking-wider mb-1 flex items-center gap-1">
                <i data-lucide="bot" class="w-4 h-4"></i> AI Asistan
            </span>
            <span class="text-sm font-bold text-gray-800 dark:text-gray-200 leading-tight">
                Sorularınızı<br>Cepten Sorun
            </span>
            <span class="text-[10px] text-gray-400 dark:text-gray-500 mt-1 group-hover:text-sky-600 transition-colors">
                Tıklayın veya Taratın →
            </span>
        </div>
    </a>
      
      <button id="landing-theme-toggle" class="absolute top-6 right-6 p-3 rounded-full bg-white dark:bg-slate-800 shadow-lg text-sky-700 dark:text-sky-400 hover:scale-110 transition-transform">
          <i data-lucide="moon" class="w-6 h-6"></i>
      </button>

      <div class="text-center max-w-2xl w-full animate-slide-up">
          <img 
              src="https://upload.wikimedia.org/wikipedia/tr/c/cc/Ataturkuni_logo.png" 
              alt="Atatürk Üniversitesi Logo" 
              class="w-24 h-24 md:w-32 md:h-32 object-contain bg-white rounded-full p-2 shadow-2xl mx-auto mb-6"
          >
          
          <div class="mb-4 space-y-1">
              <h3 class="text-lg md:text-xl font-semibold text-sky-800 dark:text-sky-300">Uygulamalı Bilimler Fakültesi</h3>
              <h3 class="text-lg md:text-xl font-semibold text-sky-700 dark:text-sky-400">Bilişim Sistemleri ve Teknolojileri</h3>
          </div>

          <h1 class="text-3xl md:text-5xl font-bold text-sky-900 dark:text-white mb-12 tracking-tight">
              Staj Rehberine Hoş Geldiniz
          </h1>

          <div class="flex justify-center w-full max-w-lg mx-auto">
              <button onclick="startApp('Staj Rehberi')" class="group relative overflow-hidden bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border-2 border-transparent hover:border-sky-500 dark:hover:border-sky-400 transition-all duration-300 hover:-translate-y-2 w-full md:w-2/3">
                  <div class="absolute inset-0 bg-sky-50 dark:bg-sky-900/20 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                  <div class="relative z-10 flex flex-col items-center">
                      <div class="p-4 bg-sky-100 dark:bg-slate-700 text-sky-600 dark:text-sky-300 rounded-2xl mb-4 group-hover:bg-sky-600 group-hover:text-white transition-colors">
                          <i data-lucide="arrow-right-circle" class="w-10 h-10"></i>
                      </div>
                      <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Başlamak için tıkla</h2>
                  </div>
              </button>
          </div>
      </div>
  </div>

  <div id="main-app" class="hidden flex-col min-h-screen">

      <header class="bg-sky-900 dark:bg-sky-950 text-white shadow-lg sticky top-0 z-40 transition-colors duration-300">
        <div class="container mx-auto px-4 py-4">
          <div class="flex flex-col md:flex-row justify-between items-center gap-4">
            
            <div class="flex items-center space-x-3 w-full md:w-auto cursor-pointer" onclick="location.reload()">
                <img 
                    src="https://upload.wikimedia.org/wikipedia/tr/c/cc/Ataturkuni_logo.png" 
                    alt="Atatürk Üniversitesi Logo" 
                    class="w-12 h-12 object-contain bg-white rounded-full p-1 shadow-lg"
                >
                <div>
                    <h1 class="text-lg md:text-xl font-bold leading-tight">Atatürk Üniversitesi</h1>
                    <p class="text-sky-200 text-xs md:text-sm">Bilişim Sistemleri ve Teknolojileri <span id="staj-type-label"></span></p>
                </div>
            </div>

            <div class="flex items-center gap-3 w-full md:w-auto overflow-x-auto no-scrollbar">
                <nav class="flex p-1 space-x-1 bg-sky-800 dark:bg-sky-900 rounded-xl" id="tab-container"></nav>

                <div class="relative group flex items-center">
                <a href="https://chatgpt.com/g/g-684140347a488191bae47913dc16815a-staj-basvuru-asistani-bst" target="_blank" class="flex items-center gap-2 px-3 py-2 rounded-xl bg-indigo-50 dark:bg-slate-800 hover:bg-indigo-100 dark:hover:bg-slate-700 text-indigo-700 dark:text-indigo-300 transition-all shadow-sm border border-indigo-200 dark:border-slate-600 mr-2">
                    <i data-lucide="bot" class="w-7 h-7"></i>
                    <span class="text-xs font-bold hidden sm:inline">Staj AI</span>
                </a>
                
                <div class="absolute top-full right-0 mt-4 p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border-2 border-indigo-100 dark:border-slate-600 hidden group-hover:block z-50 w-48 animate-fade-in">
                    <div class="flex items-center gap-2 mb-2 text-indigo-700 dark:text-indigo-400 font-bold text-xs border-b border-gray-100 dark:border-slate-700 pb-2">
                        <i data-lucide="bot" class="w-4 h-4"></i>
                        <span>AI Asistana Bağlan</span>
                    </div>
                    <img src="qr.jpg" 
                         class="w-full h-auto rounded-lg border border-gray-100 dark:border-slate-700"
                    >
                    <p class="text-[10px] text-center mt-2 text-gray-500 dark:text-gray-400">Telefondan devam etmek için okutunuz.</p>
                </div>
            </div>
                
                <button id="app-theme-toggle" class="p-2 rounded-xl bg-sky-800 hover:bg-sky-700 dark:bg-slate-800 dark:hover:bg-slate-700 text-sky-100 transition-all shadow-sm border border-sky-700 dark:border-slate-600 flex-shrink-0">
                    <i data-lucide="moon" class="w-5 h-5"></i>
                </button>
            </div>

          </div>
        </div>
      </header>

      <main class="flex-grow container mx-auto px-4 py-8 max-w-7xl animate-fade-in">
        
        <div id="section-header" class="mb-6 px-2"></div>

        <div class="relative group">
           <button id="btn-prev" class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-3 z-20 bg-white dark:bg-slate-800 p-3 rounded-full shadow-lg border border-gray-100 dark:border-slate-700 text-sky-700 dark:text-sky-400 hover:bg-sky-50 dark:hover:bg-slate-700 hidden md:flex transition-all transform hover:scale-110">
             <i data-lucide="chevron-left" class="w-6 h-6"></i>
           </button>

           <div id="slider-track" class="flex overflow-x-auto gap-6 snap-x snap-mandatory scrollbar-hide py-4 px-2 scroll-smooth">
             </div>

           <button id="btn-next" class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-3 z-20 bg-white dark:bg-slate-800 p-3 rounded-full shadow-lg border border-gray-100 dark:border-slate-700 text-sky-700 dark:text-sky-400 hover:bg-sky-50 dark:hover:bg-slate-700 hidden md:flex transition-all transform hover:scale-110">
             <i data-lucide="chevron-right" class="w-6 h-6"></i>
           </button>
        </div>

      </main>

      <footer class="bg-white dark:bg-slate-900 border-t border-gray-200 dark:border-slate-800 mt-auto py-6 transition-colors duration-300">
        <div class="container mx-auto px-4 text-center text-gray-500 dark:text-gray-400 text-sm">
          <p>© <span id="year"></span> Atatürk Üniversitesi</p>
        </div>
      </footer>
  </div>

<div id="gallery-modal" class="fixed inset-0 z-[100] hidden bg-black/95 backdrop-blur-md flex items-center justify-center p-2 sm:p-4 transition-opacity duration-300 opacity-0" onclick="closeGallery(event)">
    <div class="relative max-w-[95vw] w-full flex flex-col items-center">
        
        <button onclick="closeGallery(null, true)" class="absolute -top-10 -right-2 md:-right-10 text-white hover:text-red-400 transition-colors p-2 z-50 bg-black/20 rounded-full">
            <i data-lucide="x" class="w-6 h-6 md:w-8 md:h-8"></i>
        </button>

        <img id="modal-img" src="" class="hidden rounded-lg shadow-2xl max-h-[90vh] max-w-full w-auto h-auto object-contain border-2 border-white/10 bg-black" onclick="event.stopPropagation()">
        
        <iframe id="modal-pdf" src="" class="hidden w-full md:w-[800px] h-[80vh] rounded-lg shadow-2xl bg-white border-2 border-white/10" onclick="event.stopPropagation()"></iframe>
        
        <div id="modal-caption" class="mt-3 text-white text-sm md:text-base text-center font-medium bg-white/10 px-6 py-2 rounded-full backdrop-blur-md border border-white/10">
            </div>

        <div class="absolute top-1/2 -translate-y-1/2 w-full flex justify-between px-2 pointer-events-none">
             <button onclick="changeModalSlide(-1); event.stopPropagation();" class="pointer-events-auto bg-black/50 hover:bg-black/80 text-white p-2 md:p-3 rounded-full backdrop-blur transition transform hover:scale-110 md:-ml-14">
                <i data-lucide="chevron-left" class="w-6 h-6 md:w-8 md:h-8"></i>
             </button>
             <button onclick="changeModalSlide(1); event.stopPropagation();" class="pointer-events-auto bg-black/50 hover:bg-black/80 text-white p-2 md:p-3 rounded-full backdrop-blur transition transform hover:scale-110 md:-mr-14">
                <i data-lucide="chevron-right" class="w-6 h-6 md:w-8 md:h-8"></i>
             </button>
        </div>
    </div>
</div>

<script>
/* =========================================
   1. DATA & CONFIGURATION
   ========================================= */
const TABS = {
  ONCESI: "Staj Öncesi",
  SURECI: "Staj Süreci",
  SONRASI: "Staj Sonrası"
};

const FIXED_HOLIDAYS = [
  {d:1, m:0}, {d:23, m:3}, {d:1, m:4}, {d:19, m:4}, 
  {d:15, m:6}, {d:30, m:7}, {d:29, m:9}
];

const RELIGIOUS_DATES = [
  "2025-03-30", "2025-03-31", "2025-04-01", 
  "2025-06-06", "2025-06-07", "2025-06-08", "2025-06-09",
  "2026-03-20", "2026-03-21", "2026-03-22", 
  "2026-05-27", "2026-05-28", "2026-05-29", "2026-05-30",
  "2027-03-09", "2027-03-10", "2027-03-11",
  "2027-05-16", "2027-05-17", "2027-05-18", "2027-05-19"
];

/* CONTENT TEMPLATES */
const DATA = {
  [TABS.ONCESI]: [
    {
      title: "1. Hazır mıyım? (Checklist)",
      icon: "clipboard-check",
      desc: "Durumunuzu aşağıdaki kutucuklara tıklayarak kontrol ediniz:",
      content: `
        <div class="bg-sky-50 dark:bg-sky-900/20 border border-sky-100 dark:border-sky-800/30 p-4 rounded-xl space-y-3 transition-colors">
           <label class="flex items-start cursor-pointer group">
             <input type="checkbox" id="chk-term" class="readiness-check mt-1 w-4 h-4 text-sky-600 rounded focus:ring-sky-500 border-gray-300 dark:bg-slate-700 dark:border-slate-600">
             <span class="ml-2 text-sm text-gray-700 dark:text-gray-300 group-hover:text-sky-600 dark:group-hover:text-sky-400 transition-colors">En az 4 yarıyılı (2. sınıfı) tamamladım.</span>
           </label>
           <label class="flex items-start cursor-pointer group">
             <input type="checkbox" id="chk-summer" class="readiness-check mt-1 w-4 h-4 text-sky-600 rounded focus:ring-sky-500 border-gray-300 dark:bg-slate-700 dark:border-slate-600">
             <span class="ml-2 text-sm text-gray-700 dark:text-gray-300 group-hover:text-sky-600 dark:group-hover:text-sky-400 transition-colors">Yaz okulunda 9 saatten fazla dersim YOK.</span>
           </label>
           <label class="flex items-start cursor-pointer group">
             <input type="checkbox" id="chk-calendar" class="readiness-check mt-1 w-4 h-4 text-sky-600 rounded focus:ring-sky-500 border-gray-300 dark:bg-slate-700 dark:border-slate-600">
             <span class="ml-2 text-sm text-gray-700 dark:text-gray-300 group-hover:text-sky-600 dark:group-hover:text-sky-400 transition-colors">Staj zamanı akademik takvim dışındadır.</span>
           </label>
        </div>
        
        <div id="readiness-feedback" class="mt-4 p-3 rounded-lg text-sm border bg-gray-50 border-gray-200 text-gray-500 dark:bg-slate-800 dark:border-slate-700 dark:text-gray-400 flex items-start animate-fade-in transition-colors">
            <i data-lucide="info" class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0"></i>
            <span>Sonucu görmek için durumunuzu işaretleyiniz.</span>
        </div>
      `
    },
    {
      title: "2. Staj Yeri Belirleme",
      icon: "map-pin",
      desc: "Staj yerinizi belirlerken dikkat etmeniz gereken kurallar.",
      content: `
        <div class="space-y-3 text-sm text-gray-600 dark:text-gray-300 mt-10">
           <ol class="list-decimal list-inside space-y-2">
             <li>Staj yerini öğrenci kendisi bulur ve uygunluk onayı için komisyona bildirir.</li>
             <li>Staj 1 ve Staj 2 aynı firmada yapılabilir. ANCAK: Farklı departmanlarda olmak zorundadır.</li>
             <li>Departman, bölüm müfredatıyla ilgili olmalıdır.</li>
             <li>Toplam staj süresi (Staj 1 + Staj 2) 40 gün olmalıdır.</li>
           </ol>
        </div>
      `
    },
    {
      title: "3. Staj Hesaplayıcı",
      icon: "calendar-days",
      desc: "20 İş Günü kuralına göre bitiş tarihini hesaplayın.",
      content: `
        <div class="bg-gray-50 dark:bg-slate-800/50 border border-gray-200 dark:border-slate-700 p-4 rounded-xl shadow-inner transition-colors">
           <div class="mb-3">
             <label class="block text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-1">Başlangıç Tarihi</label>
             <input type="date" id="start-date" class="w-full border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 dark:text-white rounded p-2 text-sm focus:ring-2 focus:ring-sky-500 outline-none transition-colors">
           </div>
           
           <div class="mb-4">
             <label class="flex items-start cursor-pointer">
               <input type="checkbox" id="sat-work" class="mt-1 w-4 h-4 text-sky-600 rounded dark:bg-slate-700 dark:border-slate-600">
               <div class="ml-2 text-sm text-gray-700 dark:text-gray-300">
                 Cumartesi Dahil
                 <p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">Sadece kurumunuz haftada 6 gün çalışıyorsa ve Özel Sektör ise işaretleyiniz. Kamu kurumlarında Cumartesi stajı yapılamaz.</p>
               </div>
             </label>
           </div>

           <button onclick="calculateEndDate()" class="w-full bg-sky-600 hover:bg-sky-700 dark:bg-sky-700 dark:hover:bg-sky-600 text-white py-2 rounded-lg text-sm font-medium transition shadow-md active:scale-95">
             Hesapla
           </button>

           <div id="calc-result" class="mt-3 hidden text-center p-3 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-300 rounded-lg text-sm font-bold border border-green-200 dark:border-green-800/50 animate-fade-in">
           </div>
        </div>
      `
    },
    {
      title: "4. Staj Başvurusu",
      icon: "monitor",
      desc: "OBS üzerinden başvuru ve imza süreci.",
      content: `
        <div class="p-3 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 text-red-900 dark:text-red-200 text-sm rounded-r-lg mb-4">
           <p class="font-bold text-xs">Kritik Süre:</p>
           <span class="text-xs">OBS Başvurusu en geç 30 gün önce yapılmalıdır.</span>
        </div>

        <div class="mb-4">
            <p class="text-[10px] uppercase font-bold text-gray-400 dark:text-gray-500 tracking-wider mb-3 text-center">Görsel Anlatım (Tıklayınız)</p>
            
            <div class="relative flex justify-between items-center px-2">
                <div class="absolute left-4 right-4 top-1/2 h-0.5 bg-gray-200 dark:bg-slate-700 -z-0 rounded"></div>
                
                ${[1,2,3,4,5,6,7,8].map(num => `
                    <button onclick="openGallery(${num-1})" class="relative z-10 w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300 transform hover:scale-125 bg-white dark:bg-slate-800 border-2 border-sky-500 text-sky-700 dark:text-sky-400 shadow-md hover:bg-sky-500 hover:text-white dark:hover:bg-sky-500 dark:hover:text-white group">
                        ${num}
                    </button>
                `).join('')}
            </div>
        </div>

        <a href="https://obs.atauni.edu.tr/" target="_blank" class="block w-full text-center bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 rounded-lg transition-colors text-xs shadow-sm">
            OBS Giriş Ekranına Git
        </a>
      `
    },
   {
      title: "5. Evrak Hazırlığı",
      icon: "file-text",
      desc: "Staj başvurusu belgesini bir önceki aşamadan aldıktan sonra aşşağıdaki linklerdeki belgeleri indirin ve doldurun.",
      content: `
        <div class="space-y-3 mt-2">
           <div class="p-2 bg-sky-50 dark:bg-slate-800 rounded border border-sky-100 dark:border-slate-700 text-xs text-center text-gray-600 dark:text-gray-400">
             Aşağıdaki belgeleri indirip doldurunuz:
           </div>
           
           <div class="space-y-2">
               <a href="staj-sozlesmesi.docx" class="flex items-center justify-between w-full px-3 py-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:bg-sky-50 dark:hover:bg-slate-700 transition-colors group text-left">
                   <div class="flex items-center gap-2">
                        <i data-lucide="download" class="w-4 h-4 text-sky-600 dark:text-sky-400"></i>
                        <span class="text-xs font-semibold text-gray-700 dark:text-gray-200">1. Staj Sözleşme Belgesi</span>
                   </div>
                   <i data-lucide="chevron-right" class="w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"></i>
               </a>

               <a href="staj-taahhut-belgesi.docx" class="flex items-center justify-between w-full px-3 py-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:bg-sky-50 dark:hover:bg-slate-700 transition-colors group text-left">
                   <div class="flex items-center gap-2">
                        <i data-lucide="download" class="w-4 h-4 text-sky-600 dark:text-sky-400"></i>
                        <span class="text-xs font-semibold text-gray-700 dark:text-gray-200">2. Staj Taahhüt Belgesi</span>
                   </div>
                   <i data-lucide="chevron-right" class="w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"></i>
               </a>
               
           </div>
        </div>
      `
    },
    {
      title: "6. Hazırlık Tamamlandı",
      icon: "check-circle-2",
      desc: "Bu aşamayı tamamladınız mı?",
      content: `
        <div class="bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-xl border border-emerald-100 dark:border-emerald-800/50">
           <p class="text-sm text-emerald-900 dark:text-emerald-200 font-semibold mb-3">Kontrol Listesi:</p>
           <ul class="space-y-2 mb-4">
             <li class="flex items-center text-xs text-emerald-800 dark:text-emerald-300">
                <i data-lucide="check" class="w-4 h-4 mr-2"></i> Staj yeri ayarlandı.
             </li>
             <li class="flex items-center text-xs text-emerald-800 dark:text-emerald-300">
                <i data-lucide="check" class="w-4 h-4 mr-2"></i> OBS başvurusu yapıldı.
             </li>
             <li class="flex items-center text-xs text-emerald-800 dark:text-emerald-300">
                <i data-lucide="check" class="w-4 h-4 mr-2"></i> Evraklar indirilip dolduruldu vede imzalandı.
             </li>
           </ul>
           <button onclick="activeTab = TABS.SURECI; renderContent();" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-bold py-2 rounded-lg transition-transform active:scale-95 shadow-md flex items-center justify-center gap-2">
              Staj Süreci'ne Geç <i data-lucide="arrow-right" class="w-4 h-4"></i>
           </button>
        </div>
      `
    }
  ],
  [TABS.SURECI]: [
    {
      title: "Devam ve Disiplin",
      icon: "clock",
      desc: "Staj esnasında uyulması gereken kurallar.",
      content: `
      <a href="devam-takip-cizelgesi.docx" class="flex items-center justify-between w-full px-3 py-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:bg-sky-50 dark:hover:bg-slate-700 transition-colors group text-left">
                   <div class="flex items-center gap-2">
                        <i data-lucide="download" class="w-4 h-4 text-sky-600 dark:text-sky-400"></i>
                        <span class="text-xs font-semibold text-gray-700 dark:text-gray-200"> Devam Takip Çizelgesi</span>
                   </div>
                   <i data-lucide="chevron-right" class="w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"></i>
               </a>
        <ul class="mt-10 text-m text-gray-600 dark:text-gray-300 list-disc list-inside space-y-3 bg-gray-50 dark:bg-slate-800/50 p-4 rounded-xl border border-gray-100 dark:border-slate-700">
          <li class="txt-m">Staja fiilen devam zorunludur. Resmi tatiller pazar günleri ve mazeretsiz devamsızlıklar staj süresine dahil edilmez.</li>
          <li class="txt-m">İş yerinin tüm kurallarına , iş güvenliği ve etik kurallarına uyulmalıdır.</li>
        </ul>
      `
    },
    {
      title: "Defter Yazımı",
      icon: "book",
      desc: "Staj defteri günlük olarak doldurulmalıdır.",
      content: `
      <a href="staj-defteri.docx" class="flex items-center justify-between w-full px-3 py-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:bg-sky-50 dark:hover:bg-slate-700 transition-colors group text-left">
                   <div class="flex items-center gap-2">
                        <i data-lucide="download" class="w-4 h-4 text-sky-600 dark:text-sky-400"></i>
                        <span class="text-xs font-semibold text-gray-700 dark:text-gray-200"> Staj Defteri</span>
                   </div>
                   <i data-lucide="chevron-right" class="w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"></i>
               </a>
        <div class="text-gray-600 dark:text-gray-300 space-y-2">
            <ul class="mt-10 text-m text-gray-600 dark:text-gray-300 list-disc list-inside space-y-3 bg-gray-50 dark:bg-slate-800/50 p-4 rounded-xl border border-gray-100 dark:border-slate-700">
                <li class="txt-l">Her gün için <strong>en az 2 sayfa</strong> yazılmalıdır.</li>
                <li class="txt-l">Kanıtlayıcı belgeler (Fotoğraf, ekran görüntüsü, belge vb.) eklenmelidir.</li>
                <li class="txt-l">Her sayfa yetkili tarafından imzalanmalı ve kaşelenmelidir.</li>
            </ul>
        </div>
      `
    },
    {
      title: "Değerlendirme Formu",
      icon: "book",
      desc: "Bu form staj yeri tarafından iki suret olarak doldurulur. Bir sureti staj yerinde kalacak ve bir sureti de Üniversitemizin ilgili bölümüne gönderilir. İadeli taahhütlü posta yoluyla veya kapalı zarf içerisinde GİZLİDİR ibaresiyle öğrenciye elden teslim edilerek gönderilmelidir. Kaşenin eksik olmamasına dikkat ediniz..",
      content: `
      <a href="staj-degerlendirme-formu.docx" class="flex items-center justify-between w-full px-3 py-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg hover:bg-sky-50 dark:hover:bg-slate-700 transition-colors group text-left">
                   <div class="flex items-center gap-2">
                        <i data-lucide="download" class="w-4 h-4 text-sky-600 dark:text-sky-400"></i>
                        <span class="text-xs font-semibold text-gray-700 dark:text-gray-200"> Staj Değerlendirme Formu</span>
                   </div>
                   <i data-lucide="chevron-right" class="w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"></i>
               </a>
      `
    },
    {
      title: "Teslim Hazırlığı",
      icon: "folder-open",
      desc: "Staj biterken hazırlamanız gerekenler.",
      content: `
        <div class="p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800 rounded-xl">
            <p class="text-sm text-amber-900 dark:text-amber-200 mb-2 font-semibold">Bir sonraki aşama için hazırlayınız:</p>
            <ul class="text-xs text-amber-800 dark:text-amber-300 space-y-2">
                <li class="flex items-start gap-2">
                    <i data-lucide="file-check" class="w-4 h-4 flex-shrink-0"></i> 
                    <span>Staj defterinin tam ve imzalı olduğundan emin olun.</span>
                </li>
                <li class="flex items-start gap-2">
                    <i data-lucide="file-check" class="w-4 h-4 flex-shrink-0"></i> 
                    <span>Belgeleri mavi dosyaya yerleştirip şu sıra ile kapalı zarf içinde eklemeyi unıtmayın.</span>
                </li>
                <ol class="list-decimal list-inside space-y-2">
             <li>Staj Başvuru Formu(OBS den alınıp imzalatılan belge)</li>
             <li>Staj Sözleşmesi</li>
             <li>Staj Taahhütname belgesi(ekinde transkript belgesi olucak şekilde)</li>
             <li>Staj Defteri</li>
             <li>Staj Değerlendirme Formu(işveren tarafından doldurulıp kapalı zarf içinde koyulmuş halde)</li>
             <li>Devam Takip Çizelgesi</li>
           </ol>
            </ul>
        </div>
      `
    },
    {
      title: "6. Hazırlık Tamamlandı",
      icon: "check-circle-2",
      desc: "Bu aşamayı tamamladınız mı?",
      content: `
        <div class="bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-xl border border-emerald-100 dark:border-emerald-800/50">
           <p class="text-sm text-emerald-900 dark:text-emerald-200 font-semibold mb-3">Kontrol Listesi:</p>
           <ul class="space-y-2 mb-4">
             <li class="flex items-center text-xs text-emerald-800 dark:text-emerald-300">
                <i data-lucide="check" class="w-4 h-4 mr-2"></i> Evraklar hazırlanıp doğru sırada zarflandı.
             </li>
           </ul>
           <button onclick="activeTab = TABS.SONRASI; renderContent();" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-bold py-2 rounded-lg transition-transform active:scale-95 shadow-md flex items-center justify-center gap-2">
              Staj Sonrasına Geç <i data-lucide="arrow-right" class="w-4 h-4"></i>
           </button>
        </div>
      `
    }
  ],
  [TABS.SONRASI]: [
    {
      title: "Teslim Süreci",
      icon: "folder-check",
      desc: "Staj bittikten sonraki 1 ay içinde.",
      content: `
        <div class="text-sm text-gray-600 dark:text-gray-300">
            <p class="mb-2">Aşağıdaki evrakları teslim ediniz:</p>
            <ul class="list-disc list-inside bg-gray-50 dark:bg-slate-800 p-2 rounded text-xs space-y-1">
                <li>Staj Defteri</li>
                <li>Devam Çizelgesi</li>
                <li><strong>Kapalı Zarf:</strong> İşveren Değerlendirme Formu (Mühürlü)</li>
            </ul>
        </div>
      `
    },
    {
      title: "Değerlendirme",
      icon: "award",
      desc: "Başarı durumu ve Notlandırma.",
      content: `
        <div class="text-sm text-gray-600 dark:text-gray-300 space-y-2">
            <p>Evraklar komisyon tarafından incelenir. Gerekirse mülakat yapılır.</p>
            <p>Notu <strong class="text-red-600 dark:text-red-400">FF</strong> olan stajlar reddedilir ve tekrarlanması gerekir.</p>
        </div>
      `
    }
  ]
};

/* =========================================
   2. LOGIC FUNCTIONS
   ========================================= */
const landingPage = document.getElementById("landing-page");
const mainApp = document.getElementById("main-app");
const stajTypeLabel = document.getElementById("staj-type-label");

const tabContainer = document.getElementById("tab-container");
const sliderTrack = document.getElementById("slider-track");
const sectionHeader = document.getElementById("section-header");
let activeTab = TABS.ONCESI;

/* DARK MODE LOGIC */
function toggleTheme() {
    const html = document.documentElement;
    html.classList.toggle('dark');
    const isDark = html.classList.contains('dark');
    localStorage.theme = isDark ? 'dark' : 'light';
    
    // Update both toggle buttons
    const iconName = isDark ? 'sun' : 'moon';
    document.querySelector("#landing-theme-toggle i").setAttribute('data-lucide', iconName);
    document.querySelector("#app-theme-toggle i").setAttribute('data-lucide', iconName);
    lucide.createIcons();
}

// Initial Theme Check
if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
    document.documentElement.classList.add('dark');
    document.querySelectorAll('[id$="theme-toggle"] i').forEach(i => i.setAttribute('data-lucide', 'sun'));
}

document.getElementById("landing-theme-toggle").onclick = toggleTheme;
document.getElementById("app-theme-toggle").onclick = toggleTheme;

/* APP STATE */
function startApp(type) {
    landingPage.style.display = "none";
    mainApp.classList.remove("hidden");
    mainApp.classList.add("flex");
    stajTypeLabel.textContent = ""; 
    
    // Initialize the main app components
    initTabs();
    document.getElementById("year").textContent = new Date().getFullYear();
    lucide.createIcons();
}

/* TAB RENDERING */
function initTabs() {
  tabContainer.innerHTML = ""; // Clear existing tabs
  Object.values(TABS).forEach(tab => {
    const btn = document.createElement("button");
    btn.textContent = tab;
    btn.className = "whitespace-nowrap px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300";
    btn.onclick = () => { activeTab = tab; renderContent(); };
    btn.dataset.tab = tab;
    tabContainer.appendChild(btn);
  });
  renderContent();
}

/* CAROUSEL RENDERING */
function renderContent() {
  sliderTrack.scrollLeft = 0;
  // Update Tab Styles
  [...tabContainer.children].forEach(b => {
    if(b.dataset.tab === activeTab) {
      b.className = "whitespace-nowrap px-5 py-2 rounded-lg text-sm font-bold bg-white dark:bg-slate-800 text-sky-900 dark:text-sky-400 shadow-md transform scale-105 transition-all";
    } else {
      b.className = "whitespace-nowrap px-4 py-2 rounded-lg text-sm font-medium text-sky-100 hover:bg-sky-700 dark:hover:bg-slate-700 transition-all opacity-80";
    }
  });

  // Header Animation
  sectionHeader.innerHTML = `<h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 animate-fade-in transition-colors">${activeTab}</h2>`;

  // Generate Cards
  sliderTrack.innerHTML = "";
  const items = DATA[activeTab] || [];
  
  items.forEach((item, index) => {
    const div = document.createElement("div");
    // snap-start used for strict alignment
    div.className = "snap-start flex-shrink-0 w-full md:w-[calc(50%-12px)] bg-white dark:bg-slate-850 p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-slate-800 animate-fade-in flex flex-col transition-all duration-300 hover:shadow-md";
    div.style.animationDelay = `${index * 100}ms`;
    
    div.innerHTML = `
      <div class="flex items-center mb-4">
        <div class="p-2.5 bg-sky-50 dark:bg-slate-800 rounded-xl mr-3 text-sky-600 dark:text-sky-400 transition-colors shadow-sm">
            <i data-lucide="${item.icon}"></i>
        </div>
        <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 transition-colors leading-tight">${item.title}</h3>
      </div>
      
      <p class="text-gray-600 dark:text-gray-400 text-m mb-0 pb-4 border-b border-gray-100 dark:border-slate-800 transition-colors">
        ${item.desc}
      </p>

      <div class="pt-4 w-full transition-colors">
        ${item.content}
      </div>
    `;
    sliderTrack.appendChild(div);
  });
  
  // Re-initialize logic for checkboxes if we are on the first tab
  if (activeTab === TABS.ONCESI) {
    setupChecklistLogic();
  }

  lucide.createIcons();
}

/* 3. NEW: CHECKLIST LOGIC */
function setupChecklistLogic() {
  const chkTerm = document.getElementById("chk-term");
  const chkSummer = document.getElementById("chk-summer");
  const chkCalendar = document.getElementById("chk-calendar");
  const feedback = document.getElementById("readiness-feedback");

  if (!chkTerm || !chkSummer || !chkCalendar) return;

  function updateFeedback() {
    // If all are checked
    if (chkTerm.checked && chkSummer.checked && chkCalendar.checked) {
      feedback.className = "mt-4 p-3 rounded-lg text-sm border bg-emerald-50 border-emerald-200 text-emerald-800 dark:bg-emerald-900/20 dark:border-emerald-800/50 dark:text-emerald-300 flex items-start animate-fade-in transition-colors";
      feedback.innerHTML = `<i data-lucide="check-circle-2" class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0"></i><span>Harika! Şartları sağlıyorsunuz. Sonraki adıma geçebilirsiniz.</span>`;
      lucide.createIcons();
      return;
    }

    // Identify the specific blocking issue
    let msg = "";
    if (!chkTerm.checked) {
      msg = "Staj yapabilmek için en az 4. yarıyılı tamamlamış olmanız gerekmektedir.";
    } else if (!chkSummer.checked) {
      msg = "Yaz okulunda 9 saatten fazla dersiniz varsa staj yapamazsınız.";
    } else if (!chkCalendar.checked) {
      msg = "Staj tarihleri akademik takvim ile (ders/sınav dönemleri) çakışmamalıdır.";
    }

    // Error State
    feedback.className = "mt-4 p-3 rounded-lg text-sm border bg-red-50 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800/50 dark:text-red-300 flex items-start animate-fade-in transition-colors";
    feedback.innerHTML = `<i data-lucide="alert-circle" class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0"></i><span><strong>Engel:</strong> ${msg}</span>`;
    lucide.createIcons();
  }

  // Attach Listeners
  [chkTerm, chkSummer, chkCalendar].forEach(chk => {
    chk.addEventListener('change', updateFeedback);
  });
}

/* CALCULATOR LOGIC */
function calculateEndDate() {
  const inputDate = document.getElementById("start-date").value;
  const includeSat = document.getElementById("sat-work").checked;
  const resultBox = document.getElementById("calc-result");

  if (!inputDate) {
    resultBox.classList.remove("hidden");
    resultBox.className = "mt-3 text-center p-2 bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200 rounded-lg text-sm border border-red-200 dark:border-red-900/50 animate-fade-in";
    resultBox.textContent = "Lütfen tarih seçiniz.";
    return;
  }

  let currentDate = new Date(inputDate);
  let workDays = 0;
  let loopSafety = 0; 

  while (workDays < 19 && loopSafety < 100) {
    currentDate.setDate(currentDate.getDate() + 1); 
    
    const dayOfWeek = currentDate.getDay(); 
    const d = currentDate.getDate();
    const m = currentDate.getMonth(); 
    const isoDate = currentDate.toISOString().split('T')[0]; 

    if (dayOfWeek === 0) { loopSafety++; continue; } 
    if (dayOfWeek === 6 && !includeSat) { loopSafety++; continue; } 
    if (FIXED_HOLIDAYS.some(h => h.d === d && h.m === m)) { loopSafety++; continue; }
    if (RELIGIOUS_DATES.includes(isoDate)) { loopSafety++; continue; }

    workDays++;
    loopSafety++;
  }

  const formatter = new Intl.DateTimeFormat('tr-TR', { day: 'numeric', month: 'long', year: 'numeric', weekday: 'long' });
  
  resultBox.classList.remove("hidden");
  resultBox.className = "mt-3 text-center p-4 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300 rounded-lg text-sm font-bold border border-emerald-200 dark:border-emerald-900/50 animate-fade-in shadow-sm";
  resultBox.innerHTML = `
    <div class="uppercase text-xs tracking-wider opacity-80 mb-1">Tahmini Bitiş Tarihi</div>
    <div class="text-xl font-extrabold">${formatter.format(currentDate)}</div>
    <div class="text-[10px] font-normal opacity-75 mt-2 bg-white/50 dark:bg-black/20 inline-block px-2 py-1 rounded">
      (Resmi tatiller ve Pazar günleri hariç tutuldu)
    </div>
  `;
}

/* SLIDER CONTROLS */
document.getElementById("btn-next").onclick = () => {
  const card = sliderTrack.firstElementChild;
  const scrollAmount = card ? card.offsetWidth + 24 : 300; 
  sliderTrack.scrollBy({ left: scrollAmount, behavior: 'smooth' }); 
};
document.getElementById("btn-prev").onclick = () => {
  const card = sliderTrack.firstElementChild;
  const scrollAmount = card ? card.offsetWidth + 24 : 300;
  sliderTrack.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
};

/* INITIALIZATION */
lucide.createIcons();
/* =========================================
/* =========================================
   GALLERY MODAL LOGIC (Updated for PDF support)
   ========================================= */

// UPDATED DATA: Step 6 is now a PDF example
const GALLERY_STEPS = [
    { type: 'img', src: "1.jpg", text: "1. OBS Giriş Ekranı: Kullanıcı bilgilerinizi giriniz." },
    { type: 'img', src: "2.jpg", text: "2. Menüden 'Staj İşlemleri' sekmesini seçiniz." },
    { type: 'img', src: "3.jpg", text: "3. Sağ üst köşedeki 'Yeni Başvuru' butonuna tıklayınız." },
    { type: 'img', src: "4.jpg", text: "4. Firma ve tarih bilgilerini doldurunuz." },
    { type: 'pdf', src: "ön basvuru form 1 5.pdf", text: "6. ÖRNEK FORM: Bu formun çıktısını alınız." },
    { type: 'img', src: "6.jpg", text: "5. 'Kaydet' butonuna basarak işlemi tamamlayınız." },
    { type: 'img', src: "7.jpg", text: "7. Islak imza süreçlerini tamamlayıp yükleyiniz." },
    { type: 'pdf', src: "stajBelge 8.pdf", text: "8. ÖRNEK FORM: Bu formun çıktısını alınız." },
];

let currentModalIndex = 0;
const modalEl = document.getElementById("gallery-modal");
const modalImg = document.getElementById("modal-img");
const modalPdf = document.getElementById("modal-pdf"); // New Element
const modalCap = document.getElementById("modal-caption");

function openGallery(index) {
    currentModalIndex = index;
    updateModalContent();
    
    // Show Modal
    modalEl.classList.remove("hidden");
    setTimeout(() => {
        modalEl.classList.remove("opacity-0");
    }, 10);
}

function closeGallery(e, force = false) {
    if (force || e.target === modalEl) {
        modalEl.classList.add("opacity-0");
        setTimeout(() => {
            modalEl.classList.add("hidden");
            // Reset sources to stop PDF/Video from playing in background
            modalPdf.src = "";
        }, 300);
    }
}

function changeModalSlide(direction) {
    currentModalIndex += direction;
    if (currentModalIndex >= GALLERY_STEPS.length) currentModalIndex = 0;
    if (currentModalIndex < 0) currentModalIndex = GALLERY_STEPS.length - 1;
    updateModalContent();
}

function updateModalContent() {
    const data = GALLERY_STEPS[currentModalIndex];
    modalCap.textContent = data.text;

    if (data.type === 'pdf') {
        // Hide Image, Show PDF
        modalImg.classList.add("hidden");
        modalPdf.classList.remove("hidden");
        modalPdf.src = data.src;
    } else {
        // Show Image, Hide PDF
        modalPdf.classList.add("hidden");
        modalImg.classList.remove("hidden");
        modalImg.src = data.src;
    }
}

// Add Keyboard Support
document.addEventListener('keydown', (e) => {
    if (modalEl.classList.contains('hidden')) return;
    if (e.key === "Escape") closeGallery(null, true);
    if (e.key === "ArrowRight") changeModalSlide(1);
    if (e.key === "ArrowLeft") changeModalSlide(-1);
});
</script>
</body>
</html>



















